{% extends 'Default/base.html.twig' %}

{% block head %}
  {{ encore_entry_link_tags('index') }}
{% endblock %}

{% block body %}

  {% if not app.user %}
    {{ include('Index/welcome-section.html.twig') }}
  {% endif %}

  <div data-controller="hello">

  </div>

  {% if featured|length > 0 %}
    <div id="featured-slider" class="featured-slider">
      <h2>{{ "programs.featured"|trans({}, "catroweb") }}</h2>
      {{ include('components/carousel.html.twig',
        { 'carousel' :
          {
            'id' : 'feature-slider',
            'slideCount' : featured|length,
            'slides' : featured,
            'classes' : '',
            'controls' : true,
            'width': '1024',
            'height': '400',
            'alt': ''
          }
        }
      ) }}
    </div>
  {% endif %}

  <div id="home-projects">
    {# array values: [api project_type, translation, property to show] #}
    {% for category in [
      ['recent', 'newest', 'uploaded'],
      ['example', 'example', 'author'],
      ['random', 'random', 'uploaded'],
      ['most_downloaded', 'most.downloaded', 'downloads'],
      ['most_viewed', 'most.viewed', 'views'],
      ['scratch', 'scratchremixes', 'views'],
      ['recommended', 'recommended', 'views']
    ] %}
      <div id="home-projects__{{ category[0] }}" data-category="{{ category[0] }}" data-property="{{ category[2] }}"
           data-theme="{{ theme() }}" data-flavor="{{ flavor() }}" data-base-url="{{ app.request.getBaseURL() }}"
           class="project-list loading horizontal">
        <div class="container">
          <div class="project-list__title">
            <h2>{{ ("programs." ~ category[1]) | trans({}, "catroweb") }}</h2>
            <div class="project-list__title__btn-toggle btn-view-open">
              <div class="project-list__title__btn-toggle__text">{{ "show-more" | trans({}, "catroweb") }}</div>
              <div class="project-list__title__btn-toggle__icon material-icons">arrow_forward</div>
            </div>
          </div>
          <div class="lazyload projects-spinner-container">
            {% include 'components/loading_spinner.html.twig' only %}
          </div>
          <div class="lazyload project-list__wrapper">
            <div class="lazyload projects-container"></div>
            <div class="lazyload project-list__chevrons">
              <div class="lazyload project-list__chevrons__left material-icons mdc-icon-button" style="display: none;">
                chevron_left
              </div>
              <div class="lazyload project-list__chevrons__right material-icons mdc-icon-button">chevron_right</div>
            </div>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
  <i class="material-icons d-none" id="project-opening-spinner" style="margin: auto;">
    {% include 'components/loading_spinner.html.twig' with {'spinner_id': 'project-opening-spinner' ~ suffix|default(), 'small': 'true'} %}
  </i>

  <div class="js-path-click-stats" data-path-click-stats="'{{ path('click_stats') }}"></div>
  <div class="js-path-click-stats" data-path-homepage-click-stats="'{{ path('homepage_click_stats') }}"></div>
  <div class="js-trans-ok" data-trans-ok="'{{ "ok"|trans({}, "catroweb") }}"></div>

  <div class="js-oauth-greeting"
       data-path-oauth-first-login="{{ path('oauth_first_login') }}"
       data-trans-title="{{ 'oauthPopUpTitle' | trans({}, 'catroweb') }}"
       data-trans-info="{{ 'oauthInfo' | trans({}, 'catroweb') }}"
       data-trans-ok="{{ 'ok' | trans({}, 'catroweb') }}"
  ></div>
{% endblock %}

{% block javascript %}
  {{ encore_entry_script_tags('index') }}
{% endblock %}
